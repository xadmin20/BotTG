!function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=e(t),s=2.5,i=n.default.extend({name:"VueHorizontal",data:function(){return{left:0,width:0,scrollWidth:0,hasPrev:!1,hasNext:!1,debounceId:void 0}},props:{button:{type:Boolean,default:function(){return!0}},buttonBetween:{type:Boolean,default:function(){return!0}},scroll:{type:Boolean,default:function(){return!1}},responsive:{type:Boolean,default:function(){return!1}},displacement:{type:Number,default:function(){return 1}},snap:{type:String,default:function(){return"start"}}},mounted:function(){this.onScrollDebounce()},beforeDestroy:function(){clearTimeout(this.debounceId)},methods:{children:function(){return this.$refs.container.children},findPrevSlot:function(t){for(var e=this.children(),n=0;n<e.length;n++){var s=e[n].getBoundingClientRect();if(s.left<=t&&t<=s.right)return e[n];if(t<=s.left)return e[n]}},findNextSlot:function(t){for(var e=this.children(),n=0;n<e.length;n++){var s=e[n].getBoundingClientRect();if(!(s.right<=t)){if(s.left<=t)return e[n];if(t<=s.left)return e[n]}}},prev:function(){this.$emit("prev");var t=this.$refs.container,e=t.getBoundingClientRect().left,n=e+t.clientWidth*-this.displacement-s,i=this.findPrevSlot(n);if(i){var o=i.getBoundingClientRect().left-e;this.scrollToLeft(t.scrollLeft+o)}else{var a=t.clientWidth*this.displacement;this.scrollToLeft(t.scrollLeft-a)}},next:function(){this.$emit("next");var t=this.$refs.container,e=t.getBoundingClientRect().left,n=e+t.clientWidth*this.displacement+s,i=this.findNextSlot(n);if(i){var o=i.getBoundingClientRect().left-e;if(o>s)return void this.scrollToLeft(t.scrollLeft+o)}var a=t.clientWidth*this.displacement;this.scrollToLeft(t.scrollLeft+a)},scrollToIndex:function(t){var e=this.children();if(e[t]){var n=this.$refs.container,s=e[t].getBoundingClientRect().left-n.getBoundingClientRect().left;this.scrollToLeft(n.scrollLeft+s)}},scrollToLeft:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"smooth",n=this.$refs.container;n.scrollTo({left:t,behavior:e})},onScroll:function(){var t=this.$refs.container;t&&(this.$emit("scroll",{left:t.scrollLeft}),clearTimeout(this.debounceId),this.debounceId=setTimeout(this.onScrollDebounce,100))},onScrollDebounce:function(){var t=this;this.refresh((function(e){t.$emit("scroll-debounce",e)}))},refresh:function(t){var e=this;this.$nextTick((function(){var n=e.calculate();e.left=n.left,e.width=n.width,e.scrollWidth=n.scrollWidth,e.hasNext=n.hasNext,e.hasPrev=n.hasPrev,null==t||t(n)}))},calculate:function(){var t=this.$refs.container,e=this.children()[0];return{left:t.scrollLeft,width:t.clientWidth,scrollWidth:t.scrollWidth,hasNext:t.scrollWidth>t.scrollLeft+t.clientWidth+s,hasPrev:function(){var n,i;if(0===t.scrollLeft)return!1;var o=t.getBoundingClientRect().left,a=null!==(n=null==e||null===(i=e.getBoundingClientRect())||void 0===i?void 0:i.left)&&void 0!==n?n:0;return Math.abs(o-a)>=s}()}}}});function o(t,e,n,s,i,o,a,r,l,c){"boolean"!=typeof a&&(l=r,r=a,a=!1);const d="function"==typeof n?n.options:n;let h;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,i&&(d.functional=!0)),s&&(d._scopeId=s),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},d._ssrRegister=h):e&&(h=a?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),h)if(d.functional){const t=d.render;d.render=function(e,n){return h.call(n),t(e,n)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,h):[h]}return n}const a="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function r(t){return(t,e)=>function(t,e){const n=a?e.media||"default":t,s=c[n]||(c[n]={ids:new Set,styles:[]});if(!s.ids.has(t)){s.ids.add(t);let n=e.source;if(e.map&&(n+="\n/*# sourceURL="+e.map.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),s.element||(s.element=document.createElement("style"),s.element.type="text/css",e.media&&s.element.setAttribute("media",e.media),void 0===l&&(l=document.head||document.getElementsByTagName("head")[0]),l.appendChild(s.element)),"styleSheet"in s.element)s.styles.push(n),s.element.styleSheet.cssText=s.styles.filter(Boolean).join("\n");else{const t=s.ids.size-1,e=document.createTextNode(n),i=s.element.childNodes;i[t]&&s.element.removeChild(i[t]),i.length?s.element.insertBefore(e,i[t]):s.element.appendChild(e)}}}(t,e)}let l;const c={};var d=o({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-horizontal",staticStyle:{position:"relative",display:"flex"}},[t.button&&t.hasPrev?n("div",{staticClass:"v-hl-btn v-hl-btn-prev",class:{"v-hl-btn-between":t.buttonBetween},attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.prev(e)}}},[t._t("btn-prev",[n("svg",{staticClass:"v-hl-svg",attrs:{viewBox:"0 0 24 24","aria-label":"horizontal scroll area navigate to previous button"}},[n("path",{attrs:{d:"m9.8 12 5 5a1 1 0 1 1-1.4 1.4l-5.7-5.7a1 1 0 0 1 0-1.4l5.7-5.7a1 1 0 0 1 1.4 1.4l-5 5z"}})])])],2):t._e(),t._v(" "),t.button&&t.hasNext?n("div",{staticClass:"v-hl-btn v-hl-btn-next",class:{"v-hl-btn-between":t.buttonBetween},attrs:{role:"button"},on:{click:function(e){return e.stopPropagation(),t.next(e)}}},[t._t("btn-next",[n("svg",{staticClass:"v-hl-svg",attrs:{viewBox:"0 0 24 24","aria-label":"horizontal scroll area navigate to next button"}},[n("path",{attrs:{d:"m14.3 12.1-5-5a1 1 0 0 1 1.4-1.4l5.7 5.7a1 1 0 0 1 0 1.4l-5.7 5.7a1 1 0 0 1-1.4-1.4l5-5z"}})])])],2):t._e(),t._v(" "),n("div",{ref:"container",staticClass:"v-hl-container",class:{"v-hl-responsive":t.responsive,"v-hl-scroll":t.scroll,"v-hl-snap-start":"start"===t.snap,"v-hl-snap-center":"center"===t.snap,"v-hl-snap-end":"end"===t.snap},on:{"&scroll":function(e){return t.onScroll(e)}}},[t._t("default")],2)])},staticRenderFns:[]},(function(t){t&&t("data-v-45080727_0",{source:".v-hl-btn[data-v-45080727]{position:absolute;align-self:center;z-index:1;top:0;bottom:0;display:flex;align-items:center;cursor:pointer}.v-hl-btn-prev[data-v-45080727]{left:0}.v-hl-btn-prev.v-hl-btn-between[data-v-45080727]{transform:translateX(-50%)}.v-hl-btn-next[data-v-45080727]{right:0}.v-hl-btn-next.v-hl-btn-between[data-v-45080727]{transform:translateX(50%)}.v-hl-svg[data-v-45080727]{width:40px;height:40px;margin:6px;padding:6px;border-radius:20px;box-sizing:border-box;background:#fff;color:#000;fill:currentColor;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}.v-hl-container[data-v-45080727]{display:flex;width:100%;margin:0;padding:0;border:none;box-sizing:content-box;overflow-x:scroll;overflow-y:hidden;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}.v-hl-container>*[data-v-45080727]{flex-shrink:0;box-sizing:border-box;min-height:1px}.v-hl-snap-start>*[data-v-45080727]{scroll-snap-align:start}.v-hl-snap-center>*[data-v-45080727]{scroll-snap-align:center}.v-hl-snap-end>*[data-v-45080727]{scroll-snap-align:end}.v-hl-container[data-v-45080727]:not(.v-hl-scroll){scrollbar-width:none;-ms-overflow-style:none;padding-bottom:30px;margin-bottom:-30px;clip-path:inset(0 0 30px 0)}.v-hl-container[data-v-45080727]:not(.v-hl-scroll)::-webkit-scrollbar{width:0!important;height:0!important}.v-hl-responsive>*[data-v-45080727]{width:100%;margin-right:24px}.v-hl-responsive[data-v-45080727]>:last-child{margin-right:0}@media (min-width:640px){.v-hl-responsive>*[data-v-45080727]{width:calc((100% - 24px)/ 2)}}@media (min-width:768px){.v-hl-responsive>*[data-v-45080727]{width:calc((100% - 48px)/ 3)}}@media (min-width:1024px){.v-hl-responsive>*[data-v-45080727]{width:calc((100% - 72px)/ 4)}}@media (min-width:1280px){.v-hl-responsive>*[data-v-45080727]{width:calc((100% - 96px)/ 5)}}",map:void 0,media:void 0})}),i,"data-v-45080727",false,undefined,!1,r,void 0,void 0),h=function(t){h.installed||(h.installed=!0,t.component("VueHorizontal",d))};d.install=h;var u={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{class:{"gb-icon":"ru-icon"!==t.name},attrs:{src:"https://frontend-scripts.hb.bizmrg.com/unique-hf/svg/"+t.name+".svg",alt:t.name}})},staticRenderFns:[],name:"MnIcon",props:{name:{type:String,required:!0}}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.success?n("HorizontalScroller",{attrs:{"scroll-to-index":t.activeIndex}},t._l(t.data,(function(e,s){return n("CourseItemCard",{key:s,attrs:{"date-time":e.datetime,"card-type":e.type,link:e.link,title:e.title,text:e.text,future:e.future,active:s==t.activeIndex,index:s,seens:e.seens}})})),1):t._e()},staticRenderFns:[],name:"HorizontalScrollerEl",components:{HorizontalScroller:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"scroller"},[n("div",{staticClass:"scroller__header"},[n("span",{staticClass:"scroller__header-title"},[t._v("\n      "+t._s(t.mainTitle)+"\n    ")]),t._v(" "),n("div",{staticClass:"scroller__buttons"},[n("div",{staticClass:"scroller__buttons-left js-last-lesson",class:{active:t.hasPrev,inactive:!t.hasPrev},attrs:{title:t.btnTitleLeft},on:{click:t.prev}},[n("Icon",{staticClass:"arrow-thin-left",attrs:{name:"arrow-thin-left"}})],1),t._v(" "),n("div",{staticClass:"scroller__buttons-right js-next-lesson",class:{active:t.hasNext,inactive:!t.hasNext},attrs:{title:t.btnTitleRight},on:{click:t.next}},[n("Icon",{staticClass:"arrow-thin-right",attrs:{name:"arrow-thin-right"}})],1)])]),t._v(" "),n("VueHorizontal",t._g(t._b({ref:"horizontal",staticClass:"horizontal",attrs:{scroll:t.scroll,snap:t.snap,button:!1,buttonBetween:!0,responsive:!1,displacement:t.displacement},on:{"scroll-debounce":t.onScroll},scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}}))],null,!0)},"VueHorizontal",t.$attrs,!1),t.$listeners),[t._t("default")],2)],1)},staticRenderFns:[],name:"HorizontalScroller",components:{VueHorizontal:d,Icon:u},data:()=>({hasPrev:!1,hasNext:!0,mainTitle:"Содержание программы",btnTitleRight:"К следующему",btnTitleLeft:"К предыдущему",displacement:1,scroller:null}),props:{scroll:{type:Boolean,default:!0},snap:{type:String,default:"start"},scrollToIndex:{type:Number||String,default:0}},methods:{init(){this.scroller=this.$refs.horizontal,this.calculate(),this.scrollTo()},prev(){this.$refs.horizontal.prev()},next(){this.$refs.horizontal.next()},scrollTo(){this.$refs.horizontal?.scrollToIndex(this.scrollToIndex)},calculate(){if(this.countChild=this.scroller?.$children.length,this.countChild<1)return;const t=this.scroller?.$el.clientWidth,e=this.scroller?.$children[0].$el.clientWidth,n=Math.floor(t/e);this.displacement=Math.floor(100/n)/100},onScroll({hasPrev:t,hasNext:e}){this.hasPrev=t,this.hasNext=e}},mounted(){this.init()},created(){window.addEventListener("resize",this.calculate)},destroyed(){window.removeEventListener("resize",this.calculate)}},CourseItemCard:{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("a",{class:["lesson-item","pl-20",{"lesson-item-active":t.active},{"lesson-item-future":t.futureLesson&&!t.toDay&&!t.future}],on:{click:function(e){return t.goTo(t.link,t.futureLesson&&!t.toDay&&!t.future)},mouseleave:t.leaveCard,mouseenter:t.enterCard}},[n("div",{staticClass:"lesson-item__top"},[!t.futureLesson||t.online?n("div",{staticClass:"lesson-item__showed"},[t.seens?[n("Icon",{staticClass:"lesson-item__showed-icon",attrs:{name:"eye-bold"}}),t._v(" "),n("span",[t._v("Просмотрено")])]:t._e()],2):n("div",{staticClass:"lesson-item__closed"},[t.toDay||t.future?t._e():n("Icon",{attrs:{name:"closed",scale:"2.1"}})],1),t._v(" "),t.futureLesson&&!t.online?[t.toDay?n("templete",[n("p",[t._v("\n              Урок начнется\n              "),n("br"),t._v("\n              через\n              "),n("br"),t._v(" "),n("strong",[t._v("\n                "+t._s(t.timeToStartLesson)+"\n              ")])])]):n("templete",[n("p",[t._v("\n              Урок состоится\n              "),n("br"),t._v(" "),n("strong",{domProps:{innerHTML:t._s(t.getDateTime)}})])])]:[t.isLesson?n("div",{staticClass:"rounded-btn"},[t.hovered?n("Icon",{attrs:{name:"play-color",scale:"1"}}):n("Icon",{attrs:{name:"play",scale:"1"}})],1):n("div",{staticClass:"homework-btn"},[t.hovered?n("Icon",{attrs:{name:"homework-color"}}):n("Icon",{attrs:{name:"homework"}})],1)]],2),t._v(" "),n("div",{staticClass:"lesson-item__title"},[n("div",{staticClass:"lesson-item__title-text"},[n("span",[t._v(t._s(t.title))]),t._v(" "),n("Icon",{staticClass:"icon-play-3",attrs:{name:"play",scale:"2"}})],1),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"lesson-item__text",attrs:{title:t.text}},[t._v("\n        "+t._s(t.text)+"\n      ")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"lesson-item__title-time"},[e("span")])}],name:"CourseItemCard",components:{Icon:u},props:{dateTime:{type:String},cardType:{type:String,default:"lesson"},link:{type:String,required:!0},title:{type:String,required:!0},text:{type:String},active:{type:Boolean,required:!0},future:{type:Boolean},index:{type:Number},seens:{type:Boolean,default:!1}},data:()=>({cardIs:{chapter:"chapter",lesson:"lesson",homework:"homework"},timeToStartLesson:"",hovered:!1,online:!1}),methods:{ticTimer(){const t=(new Date).getTime(),e=(new Date(this.dateTime).getTime()-t)/1e3;this.timeToStartLesson=this.formatDelta(e)},formatDelta(t){if(this.online)return;let e=Math.floor(t/3600),n=0;return n=0==e?Math.floor(t/3600*60):Math.floor(t/3600%e*60),n.toString().length<2&&(n="0"+n.toString()),e.toString().length<2&&(e="0"+e),-1==e&&-1==n&&(this.online=!0),e+":"+n},formatDate(t,e=!0){const n=new Date(t);let s=""+(n.getMonth()+1),i=""+n.getDate(),o=""+n.getHours(),a=""+n.getMinutes();const r=new Map([["01","января"],["02","февраля"],["03","марта"],["04","апреля"],["05","мая"],["06","июня"],["07","июля"],["08","августа"],["09","сентября"],["10","октября"],["11","ноября"],["12","декабря"]]),l=n.getFullYear();return s.length<2&&(s="0"+s),i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),a.length<2&&(a="0"+a),e?[i,r.get(s.toString()),l].join(" ")+"<br/>"+o+":"+a:[i,s,l].join(".")},goTo(t,e=!1){if(e)return!1;document.location.pathname=t},leaveCard(){this.hovered=!1},enterCard(){this.hovered=!0}},computed:{futureLesson(){return new Date(this.dateTime)>new Date},toDay(){const t=this.formatDate(new Date,!1);return this.formatDate(this.dateTime,!1)===t},getDateTime(){return this.formatDate(new Date(this.dateTime))},isLesson(){return this.cardType===this.cardIs.lesson}},created(){this.toDay&&(this.ticTimer(),setInterval((()=>{this.ticTimer()}),1e3))}}},props:{data:{type:Array,default:()=>[]}},data:()=>({activeIndex:0,success:!1}),methods:{sendDataEventToMonolith(){let t=null;(()=>{let e=!0,n=!0;0===this.activeIndex&&(e=!1),this.activeIndex===this.data.length-1&&(n=!1);this.hasNextPage(this.data,this.activeIndex)||(n=!1),t=new CustomEvent("fromHorizontalScroller",{bubbles:!0,cancelable:!1,detail:{active:{left:e,right:n}}}),document.dispatchEvent(t)})()},hasNextPage(t,e){const n=new Date,s=new Date(t[e].datetime)>n;let i=!1;return t.length<=e&&(i=new Date(t[e+1].datetime)>n),!1===(s&&i)||!s&&i||!1},previousLesson(){if(this.activeIndex<1)return;const t=this.activeIndex-1,e=this.getLinkByIndex(t);this.goToPage(e)},nextLesson(){if(this.activeIndex===this.data.length-1)return;const t=this.activeIndex+1,e=this.getLinkByIndex(t);this.goToPage(e)},addEventFromMonolith(){window.addEventListener("previousLesson",this.previousLesson,!0),window.addEventListener("nextLesson",this.nextLesson,!0)},calculateActiveIndex(){const t=document.location.pathname;this.activeIndex=this.data.findIndex((e=>e.link===t))},getLinkByIndex(t){return this.data[t].link},goToPage(t){document.location.pathname=t}},created(){this.calculateActiveIndex(),this.sendDataEventToMonolith(),this.addEventFromMonolith(),this.success=!0},computed:{pathname:()=>document.location.pathname}};if(document.getElementById("vue_horizontal_scroller")){const t="lesson";let e=document.getElementById("json_course").value,s=document.getElementById("json_lesson_seens_ids").value;s=JSON.parse(s)||[],e=JSON.parse(e);const i=[],o=document.location.pathname;let a="lessons",r=!1;function l(t){if(r)return!1;const e=new Date(t)>new Date;return e&&(r=!0),e}o.includes(t)||(a="chapters"),e.forEach((t=>{const e={type:"lesson",link:`/${a}/${t.id}`,title:`Урок ${t.chapter}`,text:t.title,datetime:t?.datetime,future:l(t?.datetime),seens:s.find((e=>t.id===e))};i.push(e);let n={};t.homework_required&&(n={type:"homework",link:`/${a}/${t.id}/homework`,title:"Практическое задание",text:"",datetime:t?.datetime,future:l(t?.datetime),seens:s.find((e=>t.id===e))},i.push(n))})),new n.default({render:t=>t(v,{props:{data:i}})}).$mount("#vue_horizontal_scroller")}}(Vue);
//# sourceMappingURL=horizontal-scroller.js.map
